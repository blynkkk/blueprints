## Introduction

This blueprint will guide you through launching your project with the Industrial IoT Long Range Wireless Environmental Temperature, Humidity, Pressure, and Air Quality Sensor.

The sample project consists of the sensor, which measures temperature,
humidity, pressure, and air quality, and transmits these measurements wirelessly
to the NCD Enterprise IIoT Gateway.

## How To Use This Blueprint

### 1. Unpacking and Initial Setup

- [Industrial IoT Long Range Wireless Environmental Temperature, Humidity,
    Pressure, and Air Quality
    Sensor](https://store.ncd.io/product/industrial-iot-long-range-wireless-environmental-temperature-humidity-pressure-air-quality-sensor/)
- One of the NCD Gateway options:
    - [NCD Enterprise IIoT Gateway](https://store.ncd.io/product/enterprise-iiot-gateway/)
    - [Enterprise IIoT Gateway Lite](https://store.ncd.io/product/enterprise-iiot-gateway-lite/)
- Antennas
- Batteries (if applicable)
- Mounting accessories

Verify that you have all necessary parts. For detailed instructions on
unpacking and initial setup, refer to the [drawing
tab](https://store.ncd.io/product/industrial-iot-long-range-wireless-environmental-temperature-humidity-pressure-air-quality-sensor/#drawing)
on the product page.

### 2. Configuring the NCD Enterprise IIoT Gateway

#### 1 Required Components:
- NCD Enterprise IIoT Gateway
- Antennas

**Attach antennas to the sensor and gateway:** This enables wireless communication.

The NCD Enterprise IIoT Gateway facilitates seamless integration and communication between various IoT devices and networks.

If you haven't set up the gateway yet, please visit blynk.cloud and use the [blueprint](https://blynk.cloud/dashboard/88287/blueprints/Library/TMPL40YtWwLlq) for the gateway for a clearer setup.

If you have already set it up, you can proceed without further action.

#### 2 Access Interfaces

1. **Web Configuration:** Access the configuration interface at `http://[domain_or_ip]` using the credentials `ncdio` / `ncdB3ast`.
   - **Domain Name:** The domain name format is `ncd-xxxx.local`, where `xxxx` are the last four characters of the Gateway's MAC address. The MAC address can be found on the side of the device. For example, if the last four characters of your Gateway's MAC address are `c398`, the domain name would be `http://ncd-c398.local`.
   - **Customization:** Set up user accounts, logging, and notifications for specific events.
2. **Node-RED:** Access Node-RED at `http://[domain_or_ip]:1880`.
3. **SSH Access:** Connect via SSH with `ncdio` / `ncdB3ast` on port 22.

### 3. Preparing Your Device in Blynk.Cloud

1. **Use the Sensor Blueprint:** Click the **Use Blueprint** button.
2. **Activate the Device:** On the right panel, click the **Activate Device** button.
3. **Generate AuthToken:** Click the **Generate AuthToken** button.

![1step](https://raw.githubusercontent.com/blynkkk/blueprints/refs/heads/main//Image/1step.png)

You'll need the generated AuthToken for the next step. Click button **Next**.

### 4. Accessing Node-RED on the Gateway

1. Open a web browser and navigate to `http://[domain_or_ip]:1880`.
2. Log in to the Node-RED dashboard.

### 5. Configuring the Node-RED Flow

1. **Import the Flow:**
    - Copy or download the firmware [flow file](https://raw.githubusercontent.com/blynkkk/blueprints/refs/heads/main//Firmware/flow.json) from second step of device activation.

     ![2step](https://raw.githubusercontent.com/blynkkk/blueprints/refs/heads/main//Image/2step.png)

    - In Node-RED, press **CTRL + I** or use the menu to select **Import**.
    - Paste the copied code or upload the flow file (.json).

![Import](https://raw.githubusercontent.com/blynkkk/blueprints/refs/heads/main//Image/import.png)

Your flow should look like this:

![Node-RED Flow](https://raw.githubusercontent.com/blynkkk/blueprints/refs/heads/main//Image/flow.png)


2. **Set Up MQTT:**
   - Click on any of the highlighted MQTT-out node.

	![MQTT Out](https://raw.githubusercontent.com/blynkkk/blueprints/refs/heads/main//Image/flow-mqtt-out.png)

   - Select the highlighted icon.

	![MQTT Property](https://raw.githubusercontent.com/blynkkk/blueprints/refs/heads/main//Image/mqtt-property.png)

   - Go to the Security tab.

	![Broker Property](https://raw.githubusercontent.com/blynkkk/blueprints/refs/heads/main//Image/broker-property.png)

   - Enter the AuthToken generated by Blynk as a password for your device (use “device” as the username) and click "Update".

	![Security Tab](https://raw.githubusercontent.com/blynkkk/blueprints/refs/heads/main//Image/security-tab.png)

### 6. Running the Sample Using Node-RED

Deploy the flow and use Blynk.cloud for testing. Connect during deployment flow, but data will be transferred to the cloud when the gateway receives it from the sensor.

Your dashboard should look like this:

![Dashboard](https://raw.githubusercontent.com/blynkkk/blueprints/refs/heads/main//Image/screenshot-1.png)

The Environmental Air Quality Dashboard provides a comprehensive, real-time visualization of key environmental parameters to help users monitor and analyze indoor air quality. This intuitive interface presents essential data points and insights, enabling informed decision-making to maintain a healthy environment. The Blynk mobile app provides the same functionality as the web dashboard, allowing you to monitor and manage your system on the go. You can access real-time data, view historical trends directly from your mobile device. This ensures continuous monitoring and timely alerts, helping you maintain optimal system performance anytime, anywhere.

To add a new sensor the same type, you need to repeat this guide for the new device.

## Next Steps

- Explore the Blynk Web Console and Blynk IoT app, and try monitoring your sensor data from both.
- Read the Blynk Documentation to learn how to work with Virtual Pins.
- [Learn more about Automations.](https://docs.blynk.io/en/concepts/automations)
- [Discover how to Share Devices with other users.](https://docs.blynk.io/en/blynk.console/devices/device-sharing)
- Customize the code to meet your specific needs.
- Add more sensors or devices to your setup.

## Troubleshooting

1. **Connection Problems:**
   - Ensure the sensor is powered and within range.
   - Check network settings and firewall rules.
   - Verify the gateway's network connection.

2. **Calibration Errors:**
   - Follow the software instructions to recalibrate the sensor.
   - Ensure the environment is stable during calibration.

3. **Node-RED Issues:**
   - **Flow Not Deploying:** Check for syntax errors or missing nodes.
   - **MQTT Connection Failure:** Verify MQTT broker settings and credentials.

## Related Links

- [Blynk MQTT API documentation](https://docs.blynk.io/en/hardware-guides/mqtt-api)
- [Blynk Troubleshooting guide](https://docs.blynk.io/en/getting-started/troubleshooting)
- [Blynk Documentation](https://docs.blynk.io/en/)
- [Blynk NodeRED Documentation](https://docs.blynk.io/en/hardware-guides/node-red)
- [NCD Wireless Environmental Sensor Documentation](https://ncd.io/blog/wireless-environmental-sensor-product-manual/)
- [Node-RED Documentation](https://nodered.org/docs/getting-started/local)
- [NCD Support](https://ncd.io/contact/)
- [RT090 HM EG5120 V1.0.2 Documentation](https://www.davantel.com/wp-content/uploads/2023/06/RT090_HM_EG5120_V1.0.2.pdf)
- [RobustOS Software Manual V1.0.0](https://rjconnect.co.za/wp-content/uploads/2022/12/RT_SM_RobustOS-Software-Manual_V1.0.0.pdf)

By following this blueprint, you can effectively set up and utilize your NCD Wireless Environmental Sensor for various IoT applications.

